var tracts = ui.Map.FeatureViewLayer("projects/nasa-eej/assets/tract_featureview");

var var1 = ["None", "Degree of Greenness", "Land Surface Temperature"]
var var2 = ["None", "Displacement Risk", "Social Vulnerability", "Housing Price Trend"]

var color_pal = [
  ['1_3', '#f73593'],
  ['2_3', '#a53593'],
  ['3_3', '#403593'],
  ['1_2', '#f78fb6'],
  ['2_2', '#a58fb6'],
  ['3_2', '#408fa7'],
  ['1_1', '#f7fcf5'],
  ['2_1', '#a5e8cd'],
  ['3_1', '#40dba7'],
  ['1_NA', '#FFFFFF'],
  ['2_NA', '#FFFFFF'],
  ['3_NA', '#FFFFFF']
];

// Returns a layer with all of the census tracts colored correctly to represent the data.
function getVisParams(id, palette) {
  
  return {
    polygonFillColor: {
      property: id,
      defaultValue: '#FFFFFF',
      categories: palette
    },
    
    polygonStrokeWidth: 1,
    
    opacity: 0.7
  }
}

function getOutlines() {
  return {
    
    polygonFillOpacity: 0,
    polygonStrokeWidth: 1,
    
    opacity: 1
  }
}

var tract_data = {
  "Degree of Greenness and Displacement Risk" : {
    visParams : getVisParams("ne",color_pal),
    info : "Degree of greenness compared to level of displacement risk in 2019 (from Estimated Displacement Risk model) at the census tract level."
  },
  "Degree of Greenness and Social Vulnerability" : {
    visParams : getVisParams("ns",color_pal),
    info : "Degree of greenness compared to the CDC's 2018 Social Vulnerability Index at the census tract level."
  },
  "Degree of Greenness and Housing Price Trend" : {
    visParams : getVisParams("nsc",color_pal),
    info : "Degree of greenness compared to the yearly average increase in housing price (2000 - 2020) at the zip code level."
  },
  "Land Surface Temperature and Displacement Risk" : {
    visParams : getVisParams("le",color_pal),
    info : "Change in average land surface temperature compared to level of displacement risk in 2019 (from Estimated Displacement Risk model) at the census tract level."
  },
  "Land Surface Temperature and Social Vulnerability" : {
    visParams : getVisParams("ls",color_pal),
    info : "Change in average land surface temperature compared to the CDC's 2018 Social Vulnerability Index at the census tract level."
  },
  "Land Surface Temperature and Housing Price Trend" : {
    visParams : getVisParams("lsc",color_pal),
    info : "Change in average land surface temperature compared to the yearly average increase in housing price (2000 - 2020) at the zip code level."
  },
  "Outlines" : {
    layer : getOutlines(getVisParams("ns",color_pal))
  }
}

tracts.setVisParams(
  getOutlines()
  //getVisParams("ns",color_pal)
)

Map.add(tracts);

exports.data = tract_data
exports.var1 = var1
exports.var2 = var2