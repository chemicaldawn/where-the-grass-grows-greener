var background = require("users/dawnschumacher/nasa-eej:data/background");
var layers = require("users/dawnschumacher/nasa-eej:ui/legend/panels/layers");
var style = require("users/dawnschumacher/nasa-eej:ui/map-style").style;

// Converts a layer name to a layer ID
function name_to_id(name) {
  var id = name.toLowerCase().replace(" ","_").replace(" ","_");
  return id;
}

var map = ui.Map();

// Sets the map's visual style, creating a grayscale map.
map.setOptions('Map', {
  Map: style
},
["Map","SATELLITE"]);

// Modifies the map controls, disabling unnessecary ones to improve readability.
map.setControlVisibility({
    all: false,
    layerList: true,
    zoomControl: true,
    scaleControl: true,
    mapTypeControl: true,
    fullscreenControl: false
});

// Sets the cursor style to a crosshair.
map.style().set('cursor', 'crosshair');

// Centers the map on the San Francisco bay.
map.setCenter(-122.355537, 37.828, 9);

// Map control
layers.raster_select.onChange(function (name) {
  var id = name_to_id(name);
  map.addLayer(background.data[id]["layer"]);
});

exports.object = map