var navbar = require("users/dawnschumacher/nasa-eej:ui/legend/navbar");
var style = require("users/dawnschumacher/nasa-eej:ui/legend/legend-style");

var about = require("users/dawnschumacher/nasa-eej:ui/legend/panels/about");
var layers = require("users/dawnschumacher/nasa-eej:ui/legend/panels/layers");

var legend = ui.Panel({
  style: style.legend
});

var content = ui.Panel({
  style: style.panel
});

function init() {
  
  navbar.about_button.onClick(function() {
    change_section(0)
  });
  navbar.univariate_button.onClick(function() {
    change_section(1)
  });
  navbar.bivariate_button.onClick(function() {
    change_section(2)
  });
  
  change_section(0);
}

// Called every time one of the navbar buttons is pressed.
function change_section(section_index) {
  
  navbar.change_highlight(section_index);
  content.clear();
  
  // Add the corresponding UI elements depending on which tab is pressed.
  switch(section_index) {
    case 0:
      content.add(about.object);
      break;
    case 1:
      content.add(layers.object);
      break;
  }
  
  update();
}

function update() {
  
  legend.clear();
  
  // Add the top navigation bar.
  legend.add(navbar.object);
  
  // Add the dynamic Data Panel.
  legend.add(content); 
}

exports.object = legend;

exports.init = init;
exports.update = update;