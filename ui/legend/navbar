var style = require("users/dawnschumacher/nasa-eej:ui/legend/navbar-style");

var sections = ["About", "Univariate Data", "Bivariate Data"]

// Create the base navbar panel.
var navbar = ui.Panel({
  layout: ui.Panel.Layout.flow('vertical'),
  style: style.navbar
});
  
// Create the containing panel for the row of buttons at the top, ensuring they are
// displayed in a horizontal row.
var button_row = ui.Panel({
  layout: ui.Panel.Layout.flow('horizontal'),
})
  
// Create the blue highlight bar that changes position.
var nav_highlight = ui.Panel({
  style: {
    backgroundColor: 'blue',
    height: '3px',
    width: '33.3%'
  }
})
  
// Add the navbar buttons to the navigation panel.
for (var section in sections) {
  
  var button = ui.Button({
    label: sections[section],
    style: style.navbar_button
  });
  
  button.onClick(function() {
    change_section(section)
  });
  
  button_row.add(button);
}

change_section(1);

navbar.add(button_row);
navbar.add(nav_highlight);

// Changes the visible section by stretching or shrinking the margin of the blue highlight
// UI panel.
function change_section(section_index) {
  print(section_index);
  
  nav_highlight.style().set({
    padding: "0% 0% 0% " + (33.3 * section_index).toString() + "%"
  })
  
  navbar.add(nav_highlight)
}
  
exports.object = navbar