var datapanel = require("users/dawnschumacher/nasa-eej:ui/legend/datapanel");
var style = require("users/dawnschumacher/nasa-eej:ui/legend/navbar-style");

// Create the base navbar panel.
var navbar = ui.Panel({
  layout: ui.Panel.Layout.flow('vertical'),
  style: style.navbar
});
  
// Create the containing panel for the row of buttons at the top, ensuring they are
// displayed in a horizontal row.
var button_row = ui.Panel({
  layout: ui.Panel.Layout.flow('horizontal'),
})
  
// Create the blue highlight bar that changes position.
var nav_highlight = ui.Panel({
  style: style.nav_highlight
})
  
// Create the buttons. I would do this with a loop but it literally didn't work whatsoever.
var about_button = ui.Button({
  label: "About",
  style: style.navbar_button
})
about_button.onClick(function() {
  change_section(0)
});

var univariate_button = ui.Button({
  label: "Univariate Data",
  style: style.navbar_button
});
univariate_button.onClick(function() {
  change_section(1)
});

var bivariate_button = ui.Button({
  label: "Bivariate Data",
  style: style.navbar_button
});
bivariate_button.onClick(function() {
  change_section(2)
});

// Add the navbar buttons to the navigation panel.
button_row.add(about_button);
button_row.add(univariate_button);
button_row.add(bivariate_button);

// Construct the final navbar object.
navbar.add(button_row);
navbar.add(nav_highlight);

// Changes the visible section by stretching or shrinking the margin of the blue highlight
// UI panel.
function change_section(section_index) {
  print(section_index);
  
  nav_highlight.style().set({
    margin: "0% 0% 0% " + (33.3 * section_index).toString() + "%"
  })
  
  datapanel.object.clear();
}
  
exports.object = navbar